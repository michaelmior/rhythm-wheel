(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(e,t,r){e.exports=r(20)},,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var i=r(0),n=r.n(i),a=r(9),s=r.n(a),o=(r(16),r(7)),u=r(1),c=r(2),l=r(4),p=r(3),d=r(5),h=r(6),m=(r(17),function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"Circle",style:{backgroundColor:this.props.backgroundColor,borderColor:this.props.borderColor,borderRadius:this.props.radius,width:this.props.radius,height:this.props.radius,position:"relative"}},this.props.children)}}]),t}(i.Component));m.defaultProps={backgroundColor:"transparent",borderColor:"#000",radius:"100px"};var f=m,y=(r(18),function(e){function t(e){var r;return Object(u.a)(this,t),(r=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleClick=function(e){r.setState(function(t){var r=t.active.slice();if(r.includes(e)){var i=r.indexOf(e);r.splice(i,1)}else r.push(e),r.sort(function(e,t){return e-t});return Object(o.a)({},t,{active:r})})},r.audioContext=null,r.playing=!1,r.state=Object(o.a)({active:[]},e.initialState),r.playOrPause=r.playOrPause.bind(Object(h.a)(r)),r.scheduler=r.scheduler.bind(Object(h.a)(r)),r.bounce=n.a.createRef(),r.refCircle=n.a.createRef(),r}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.soundBuffer=this.soundLoader(this.props.sound.url)}},{key:"soundLoader",value:function(e){var t=this,r={},i=new XMLHttpRequest;return i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){r.response=i.response},i.send(),r.play=function(e){var i=t.audioContext.createGain();i.gain.value=t.props.sound.volume;var n=t.audioContext.createBufferSource();n.buffer=r.soundToPlay,n.connect(i),i.connect(t.audioContext.destination),n.start(e)},r}},{key:"scheduler",value:function(){var e=this;for(window.requestAnimationFrame(function(){return e.updateBounce()});this.futureTickTime<this.audioContext.currentTime+.1;)this.playOrNot(),this.futureTick();this.timeout=window.setTimeout(this.scheduler,50)}},{key:"playOrNot",value:function(){var e=this;this.state.active.includes(this.current)&&(this.refCircle.current.setAttribute("class","pulse-anim"),window.setTimeout(function(){e.refCircle.current.setAttribute("class","")},100),this.soundBuffer.play(this.futureTickTime))}},{key:"preparePlay",value:function(){var e=this;this.props.sound&&!this.audioContext&&(this.audioContext=new AudioContext,this.audioContext.decodeAudioData(this.soundBuffer.response,function(t){e.soundBuffer.soundToPlay=t,e.soundBuffer.response=null}))}},{key:"playOrPause",value:function(){this.playing=!this.playing,this.startTickTime=this.audioContext.currentTime,this.playing?(this.current=0,this.futureTickTime=this.audioContext.currentTime,this.scheduler(),this.bounce.current.style.webkitAnimationPlayState="running"):(this.bounce.current.style.webkitAnimationPlayState="paused",this.updateBounce(),window.clearTimeout(this.timeout))}},{key:"updateBounce",value:function(){var e=this.pointCoords((this.audioContext.currentTime-this.startTickTime)*(this.props.bpm/15)%this.props.subdivisions);this.bounce.current.style.top=e.y+"px",this.bounce.current.style.left=e.x+"px"}},{key:"futureTick",value:function(){var e=60/this.props.bpm;this.futureTickTime+=.25*e,this.current=(this.current+1)%this.props.subdivisions}},{key:"pointCoords",value:function(e){var t=2*Math.PI/this.props.subdivisions*e;return{x:this.props.radius/2-2+Math.sin(t)*(this.props.radius+2)/2+10,y:this.props.radius-(this.props.radius/2-2+Math.cos(t)*(this.props.radius+2)/2)+5}}},{key:"render",value:function(){var e=this,t=[],r=this.state.active.slice();r.push(r[0]);for(var i=1;i<r.length;i++){var a=this.pointCoords(r[i]),s=this.pointCoords(r[i-1]);t.push(n.a.createElement("line",{key:"line"+i,x1:a.x,y1:a.y,x2:s.x,y2:s.y,stroke:"black",strokeWidth:"2"}))}var o=this.pointCoords(0);return n.a.createElement("div",{className:"Wheel",style:{padding:"10px"}},n.a.createElement("svg",{className:"beat-lines",style:{top:"5px",left:"5px"},width:this.props.radius+8,height:this.props.radius+8},t),n.a.createElement("div",{ref:this.bounce,className:"bounce",style:{top:o.y+"px",left:o.x+"px"}},n.a.createElement(f,{borderColor:"goldenrod",backgroundColor:"goldenrod",radius:"4px"})),n.a.createElement("div",{ref:this.refCircle},n.a.createElement(f,{borderColor:"white",radius:this.props.radius+"px"},Array.from({length:this.props.subdivisions},function(t,r){var i=e.pointCoords(r);return n.a.createElement("div",{key:"refCircle"+r,style:{cursor:"pointer",position:"absolute",top:i.y-10-3.2+"px",left:i.x-10-3+"px"},onClick:e.handleClick.bind(e,r)},n.a.createElement(f,{borderColor:"white",backgroundColor:"white",radius:"4px"}))}))),this.state.active.map(function(t){var r=e.pointCoords(t);return n.a.createElement("div",{key:"beatCircle"+t,style:{position:"absolute",top:r.y+"px",left:r.x+"px",pointerEvents:"none"}},n.a.createElement(f,{borderColor:"black",backgroundColor:"black",radius:"4px"}))}),n.a.createElement("div",{className:"name"},this.props.sound.name))}}]),t}(i.Component));y.defaultProps={subdivisions:16,radius:200};var b=y,v=(r(19),function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(l.a)(this,Object(p.a)(t).call(this))).handleClick=function(){e.setState(function(e){return Object(o.a)({},e,{playing:!e.playing})}),e.hasPlayed?e.play():(e.drums.hihat.current.preparePlay(),e.drums.kick.current.preparePlay(),e.drums.snare.current.preparePlay(),window.setTimeout(e.play,100))},e.play=function(){e.hasPlayed=!0,e.drums.hihat.current.playOrPause(),e.drums.kick.current.playOrPause(),e.drums.snare.current.playOrPause()},e.hasPlayed=!1,e.state={playing:!1},e.drums={hihat:n.a.createRef(),kick:n.a.createRef(),snare:n.a.createRef()},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"Player",style:{margin:"50px auto 0 auto",width:"800px",textAlign:"center"}},n.a.createElement(b,{ref:this.drums.kick,initialState:{active:[0,8]},bpm:120,sound:{name:"Kick",volume:10,url:"/rhythm-wheel/sounds/kick.mp3"}}),n.a.createElement(b,{ref:this.drums.snare,initialState:{active:[4,12]},bpm:120,sound:{name:"Snare",volume:10,url:"/rhythm-wheel/sounds/snare.mp3"}}),n.a.createElement(b,{ref:this.drums.hihat,initialState:{active:[0,2,4,6,8,10,12,14,16]},bpm:120,sound:{name:"Hi-Hat",volume:8,url:"/rhythm-wheel/sounds/hat.mp3"}}),n.a.createElement("button",{onClick:this.handleClick},this.state.playing?"Stop":"Play"))}}]),t}(i.Component));var k=function(){return n.a.createElement("div",{className:"App"},n.a.createElement(v,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[10,1,2]]]);
//# sourceMappingURL=main.21acc806.chunk.js.map